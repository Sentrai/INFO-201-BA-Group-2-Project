loadhistory
library(tidyverse)
library("haven")
library(maps)
data <- read_sas("NSDUH_99_19_state_saes_final.sas7bdat") %>%
#renaming stname to region for merging purposes
rename(region = stname) %>%
select(outname, pyearnm, region, agegrp, BSAE) %>%
## Removing age group 12-20 because not all data is available
## for that cohort
filter(agegrp < 5)
#Creating a year
data$year = substr(data$pyearnm, 1, 4)
data$region <- tolower(data$region)
write_csv(data, path = "~/INFO201sp21/NSDUH_data_1999-2018.csv")
data <- read_sas("NSDUH_99_19_state_saes_final.sas7bdat") %>%
#renaming stname to region for merging purposes
rename(region = stname) %>%
select(outname, pyearnm, region, agegrp, BSAE) %>%
## Removing age group 12-20 because not all data is available
## for that cohort
filter(agegrp < 5)
#Creating a year
data$year = substr(data$pyearnm, 1, 4)
data$region <- tolower(data$region)
write_csv(data, path = "~/INFO201sp21/NSDUH_data_1999-2018.csv")
data <- read_sas("~/INFO201sp21/Drug Usage/Drug Usage/NSDUH_99_19_state_saes_final.sas7bdat") %>%
#renaming stname to region for merging purposes
rename(region = stname) %>%
select(outname, pyearnm, region, agegrp, BSAE) %>%
## Removing age group 12-20 because not all data is available
## for that cohort
filter(agegrp < 5)
#Creating a year
data$year = substr(data$pyearnm, 1, 4)
data$region <- tolower(data$region)
write_csv(data, path = "~/INFO201sp21/NSDUH_data_1999-2018.csv")
View(data)
View(data)
ns_2017 <- read.delim("~/Downloads/NSDUH_2017_Tab.tsv")
View(ns_2017)
ns_2017 <- ns_2017 %>%
select(list)
library(tidyverse)
ns_2017 <- ns_2017 %>%
select(list)
list <- c("ALCTRY","CIGTRY","MJAGE", "COCAGE", "HERAGE", "HALLUCAGE", "LSDAGE", "INHALAGE")
ns_2017 <- ns_2017 %>%
select(list)
list <- c("ALCTRY","CIGTRY","MJAGE", "COCAGE", "HERAGE", "HALLUCAGE", "LSDAGE", "INHALAGE")
ns_2017 <- ns_2017 %>%
select(all_of(list))
View(ns_2017)
ns_2017 <- read.delim("~/Downloads/NSDUH_2017_Tab.tsv")
View(ns_2017)
ns_2017 <- ns_2017 %>%
select(all_of(list))
ns_2017 <- ns_2017 %>%
select(all_of(list))
View(ns_2017)
ns_2017 <- read.delim("~/Downloads/NSDUH_2017_Tab.tsv") %>%
ns_2017 <- ns_2017 %>%
select(all_of(list)
ns_2017 <- read.delim("~/Downloads/NSDUH_2017_Tab.tsv")
ns_2017 <- read.delim("~/Downloads/NSDUH_2017_Tab.tsv")
ns_2017 <- read.delim("~/Downloads/NSDUH/NSDUH_2017_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day, Month, Year"), sep = "/")
ns_2017 <- read.delim("~/Downloads/NSDUH/NSDUH_2017_Tab.tsv") %>%
select(all_of(list))
og <- read.delim("~/Downloads/NSDUH/NSDUH_2017_Tab.tsv")
View(og)
View(og)
list <- c("ALCTRY","CIGTRY","MJAGE", "COCAGE", "HERAGE", "HALLUCAGE", "LSDAGE", "INHALAGE","FILEDATE")
ns_2017 <- og %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day, Month, Year"), sep = "/")
View(ns_2017)
ns_2017 <- og %>%
select(all_of(list)) %>%
separate(col = FILEDATE, into = c("Day, Month, Year"), sep = "/")
View(ns_2017)
ns_2017 <- og %>%
select(all_of(list)) %>%
separate(col = FILEDATE, c("Day, Month, Year"))
ns_2017 <- og %>%
select(all_of(list))
separate(ns_2017, col = FILEDATE, c("Day, Month, Year"), sep = "/")
ns_2017 <- og %>%
select(all_of(list))
ns_2017 <- separate(ns_2017, col = FILEDATE, c("Day, Month, Year"), sep = "/")
View(ns_2017)
ns_2017 <- og %>%
select(all_of(list)) %>%
separate( FILEDATE, c("Day, Month, Year"))
View(ns_2017)
ns_2017 <- og %>%
select(all_of(list))
ns_2017 <- og %>%
select(all_of(list)) %>%
separate( FILEDATE, c("Day, Month, Year"))
ns_2017 <- og %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day, Month, Year"))
ns_2017 <- og %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
View(ns_2017)
ns_2018 <- read.delim("~/Downloads/NSDUH/NSDUH_2018_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2016 <- read.delim("~/Downloads/NSDUH/NSDUH_2016_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2015 <- read.delim("~/Downloads/NSDUH/NSDUH_2015_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2014 <- read.delim("~/Downloads/NSDUH/NSDUH_2014_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2013 <- read.delim("~/Downloads/NSDUH/NSDUH_2013_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2012 <- read.delim("~/Downloads/NSDUH/NSDUH_2012_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2011 <- read.delim("~/Downloads/NSDUH/NSDUH_2011_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2010 <- read.delim("~/Downloads/NSDUH/NSDUH_2010_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
list1 <- c("ALCTRY","CIGTRY","MJAGE", "COCAGE", "HERAGE", "LSDAGE","FILEDATE")
ns_2014 <- read.delim("~/Downloads/NSDUH/NSDUH_2014_Tab.tsv") %>%
select(all_of(list1)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2013 <- read.delim("~/Downloads/NSDUH/NSDUH_2013_Tab.tsv") %>%
select(all_of(list1)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2012 <- read.delim("~/Downloads/NSDUH/NSDUH_2012_Tab.tsv") %>%
select(all_of(list1)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2011 <- read.delim("~/Downloads/NSDUH/NSDUH_2011_Tab.tsv") %>%
select(all_of(list1)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2010 <- read.delim("~/Downloads/NSDUH/NSDUH_2010_Tab.tsv") %>%
select(all_of(list1)) %>%
separate(FILEDATE, c("Day","Month","Year"))
View(ns_2010)
df1 <- full_join(ns_2018,ns_2017)
df2 <- full_join(ns_2016, ns_2015)
df3 <- full_join(ns_2014, ns_2013)
temp <- full_join(ns_2012, ns_2011)
d5 <- full_join(temp, ns_2010)
df6 <- full_join(df1,df2)
df7 <- full_join(df3,df5)
df8 <- full_join(df6,df7)
df3 <- full_join(ns_2014, ns_2013)
temp <- full_join(ns_2012, ns_2011)
View(df1)
rm(ns_2018)
rm(ns_2017)
rm(ns_2016,ns_2015)
rm(df1,df2)
df3 <- full_join(ns_2014, ns_2013)
temp <- full_join(ns_2012, ns_2011)
d5 <- full_join(temp, ns_2010)
df3 <- full_join(ns_2014, ns_2013)
temp <- full_join(ns_2012, ns_2011)
library(tidyverse)
library("haven")
library(maps)
df3 <- full_join(ns_2014, ns_2013)
temp <- full_join(ns_2012, ns_2011)
d5 <- full_join(temp, ns_2010)
View(df6)
View(df6)
options (future.globals.maxSize = 4000 * 1024^5)
df3 <- full_join(ns_2014, ns_2013)
temp <- full_join(ns_2012, ns_2011)
d5 <- full_join(temp, ns_2010)
write_csv(df6, "~/INFO201sp21/INFO-201-BA-Group-2-Project/DrugUsage/nsduh_2015-2018.csv")
View(df6)
noquote("hello")
"hello"
df10 <- df6 %>%
rename(
"0" = "CIGTRY",
"1" = "ALCTRY",
"2" = "MJAGE",
"3" = "COCAGE",
"4" = "HERAGE",
"5" = "HALLUCAGE",
"6" = "LSDAGE",
"7" = "INHALAGE"
)
View(df10)
df10 <- df6 %>%
rename(
0 = "CIGTRY",
"1" = "ALCTRY",
"2" = "MJAGE",
"3" = "COCAGE",
"4" = "HERAGE",
"5" = "HALLUCAGE",
"6" = "LSDAGE",
"7" = "INHALAGE"
)
df10$1
df10$"1"
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
gdpLong <- gdp %>%
pivot_longer(
contains("X"),
names_to = "year",
values_to = "gdp"
) %>%
select(-indicator) %>%
mutate(year = gsub("X", "", year))
knitr::opts_chunk$set(echo = TRUE)
gdp <- read.delim("~/Downloads/oecd-gdp.csv.bz2")
head(gdp)
gdp <- read.delim("~/Downloads/oecd-gdp.csv.bz2")
head(gdp)
library(tidyverse)
gdpLong <- gdp %>%
pivot_longer(
contains("X"),
names_to = "year",
values_to = "gdp"
) %>%
select(-indicator) %>%
mutate(year = gsub("X", "", year))
head(gdpLong, 10)
substr
library(tidyverse)
gdpLong <- gdp %>%
pivot_longer(
contains("X"),
names_to = "year",
values_to = "gdp"
) %>%
select(-indicator) %>%
mutate(year = gsub("X", "", year))
head(gdpLong, 10)
substr
library(tidyverse)
gdpLong <- gdp %>%
pivot_longer(
contains("X"),
names_to = "year",
values_to = "gdp"
)
head(gdpLong, 10)
substr
df10 <- df6 %>%
rename(
"/CIGTRY" = "CIGTRY",
"/ALCTRY" = "ALCTRY",
"/MJAGE" = "MJAGE",
"/COCAGE" = "COCAGE",
"/HERAGE" = "HERAGE",
"/HALLUCAGE" = "HALLUCAGE",
"/LSDAGE" = "LSDAGE",
"/INHALAGE" = "INHALAGE"
)
df10 %>% pivot_longer(
contains("/"),
names_to = "substance",
values_to = 'age'
) %>%
head(10)
df10 %>% pivot_longer(
contains("/"),
names_to = "substance",
values_to = 'age'
) %>% mutate(substance = gsub("/", "", substance)) %>%
head(10)
df10 <- df10 %>% pivot_longer(
contains("/"),
names_to = "substance",
values_to = 'age'
) %>% mutate(substance = gsub("/", "", substance)) %>%
head(10)
df10 <- df10 %>% pivot_longer(
contains("/"),
names_to = "substance",
values_to = 'age'
) %>% mutate(substance = gsub("/", "", substance))
df10 <- df10 %>% pivot_longer(
contains("/"),
names_to = "substance",
values_to = 'age'
) %>% mutate(substance = gsub("/", "", substance))
library(tidyverse)
gdpLong <- gdp %>%
pivot_longer(
contains("X"),
names_to = "year",
values_to = "gdp"
) %>%
select(-indicator) %>%
mutate(year = gsub("X", "", year))
gdpLong
substr
View(df10)
df10 <- df10 %>% pivot_longer(
contains("/"),
names_to = "substance",
values_to = 'age'
) %>% mutate(substance = gsub("/", "", substance))
df10 <- df10 %>% pivot_longer(
contains("/"),
names_to = "substance",
values_to = 'age'
) %>% mutate(substance = gsub("/", "", substance))
df10 <- df6 %>%
rename(
"/CIGTRY" = "CIGTRY",
"/ALCTRY" = "ALCTRY",
"/MJAGE" = "MJAGE",
"/COCAGE" = "COCAGE",
"/HERAGE" = "HERAGE",
"/HALLUCAGE" = "HALLUCAGE",
"/LSDAGE" = "LSDAGE",
"/INHALAGE" = "INHALAGE"
)
df10 <- df10 %>% pivot_longer(
contains("/"),
names_to = "substance",
values_to = 'age'
) %>% mutate(substance = gsub("/", "", substance))
View(df6)
ns_2016 <- read.delim("~/Downloads/NSDUH/NSDUH_2016_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
ns_2015 <- read.delim("~/Downloads/NSDUH/NSDUH_2015_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year"))
df2 <- rbind(ns_2016, ns_2015)
View(df2)
View(df6)
View(df2)
View(ns_2016)
View(og)
ns_2010 %>%
mutate(Year = 2010)
ns_2019 <- read.delim("~/Downloads/NSDUH/NSDUH_2019_Tab 2.txt") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year")) %>%
mutate(Year = 2019)
ns_2017 <- og %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year")) %>%
mutate(Year = 2017)
ns_2018 <- read.delim("~/Downloads/NSDUH/NSDUH_2018_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year")) %>%
mutate(Year = 2018)
df1 <- rbind(ns_2019,ns_2018)
ns_2016 <- read.delim("~/Downloads/NSDUH/NSDUH_2016_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year")) %>%
mutate(year = 2016)
ns_2015 <- read.delim("~/Downloads/NSDUH/NSDUH_2015_Tab.tsv") %>%
select(all_of(list)) %>%
separate(FILEDATE, c("Day","Month","Year")) %>%
mutate(Year = 2015)
df2 <- rbind(ns_2017, ns_2016)
df11 <- rbind(df1,df2)
df12 <- rbind(df11, ns_2015)
View(df1)
View(df2)
View(ns_2019)
View(ns_2016)
unique(df12)
unique(df12$Year)
ns_2016 < ns_2016 %>%
select(-year) %>%
mutate(Year = 2016)
ns_2016 <- ns_2016 %>%
select(-year) %>%
mutate(Year = 2016)
df12 <- rbind(df12, ns_2017)
df12 <- rbind(df12, ns_2016)
View(df12)
unique(df12$Year)
write_csv(df12, "~/INFO201sp21/INFO-201-BA-Group-2-Project/DrugUsage/nsduh_2015-2018.csv")
write_csv(df12, "~/INFO201sp21/INFO-201-BA-Group-2-Project/DrugUsage/nsduh_2015-2019.csv")
View(df12)
df10 <- df10 %>% pivot_longer(
contains("/"),
names_to = "substance",
values_to = 'age'
) %>% mutate(substance = gsub("/", "", substance))
View(df10)
View(df10)
